<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RTTTLParser Library: Using the Library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="MajicDesigns_Logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RTTTLParser Library
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">RTTTL String parser and playing controls</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('page_library.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Using the Library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Defining the object </h2>
<p>The object definition requires no additional parameters.</p>
<h2>setup() </h2>
<p>The setup() function must invoke the begin() method. All other library initialization takes place at this time.</p>
<h2>Sound output </h2>
<p>To keep the parser library generic, sound output must be implemented in the application as the type of hardware used will dictate how the sound is produced.</p>
<p>The parser will translate the information from the RTTTL string into parameters that the application can use:</p>
<ul>
<li><b>octave</b> - generally in the valid range as is represented in the RTTTL string but no checking is done in the parser to enforce this.</li>
<li><b>note identifier</b> - the notes are numbered according to the ISO standard numbering (C=0, C#=1, ..., A#=11) and can be used directly with the MD_MusicTable library to obtain note frequency or midi note numbers. The library will also translate the non-standard flat notes into the correct equivalent. Pause values are passed back as note -1 and need to be explicitly checked.</li>
<li><b>duration</b> - the playing tempo and type of note, including dot notation, is converted into the number of milliseconds for the note or pause.</li>
</ul>
<h2>Application managed playback </h2>
<p>The RTTLParser_Manual example demonstrates this use of the library.</p>
<p>In this mode the application has complete control over how the RTTTL file is processed.</p>
<p>A simplified flow for the application is:</p>
<ul>
<li>setTune() is used initialize the library for the specified RTTTL string.</li>
<li>nextNote() is used to retrieve the next note in the sequence. In the case of a playable note, the application invokes the sound generation hardware. The application implements the logic required for the note or pause timing before processing the next note.</li>
<li>nextNote() returns true when the end of the RTTTL string is reached. Alternatively, the isEoln() method can be used to test for end of line being reached.</li>
</ul>
<h2>Library managed playback </h2>
<p>The RTTLParser_Cback example demonstrates this use of the library.</p>
<p>In this mode the application provides the library with a callback that will manage the sound generation hardware. The library will manage duration timing for pauses (ie, the application is not aware of these) and will provide the callback with note on and note off events for the application to process.</p>
<p>The simplified flow for the application is:</p>
<ul>
<li>setCallback() is used to register the callback function (can be done in setup()).</li>
<li>setTune() is used initialize the library for the specified RTTTL string.</li>
<li>run() is invoked every time through main program loop. This will run a Finite State Machine that manages the sequencing and timing of notes, and invokes the callback when required.</li>
<li>run() returns true when the end of the RTTTL string has been reached.</li>
</ul>
<h2>Parsing without playback </h2>
<p>Parsing without playback is identical to an application managed playback without 'playing' the notes. The entire string can be scanned very fast when the note durations and pauses are ignored. Once the string has been parsed, it will need to be reset using setTune().</p>
<p>Parsing an RTTTL string is useful to gather information about the string, such as what octaves are being used, the range of notes, etc. These can then be used to modify subsequent playback (eg, shifting the octave range) to suit a particular sound output device. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sat Nov 16 2019 12:57:59 for RTTTLParser Library by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.16 </li>
  </ul>
</div>
</body>
</html>
